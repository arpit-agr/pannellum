{%- extends "layouts/base.html" -%}

{% set imgUrl = "/images/" + image.fallback %}

{%- block preload -%}
  <link rel="preload" href="/scripts/index.js" as="script" fetchpriority="high">
{%- endblock -%}

{%- block content -%}
  <div id="panorama">
    <noscript>
      <img src={{ imgUrl }} alt="{{ image.alt }}">
    </noscript>
  </div>
  <div class="image-info cluster">
    {{ content | safe }}
    <p>
      {{ image.alt }}
      <br>
      Photo credit:
      <a href="{{ image.credit.link }}">
        {{ image.credit.name }}
      </a>
    </p>
  </div>
{%- endblock -%}

{%- block bodyScripts -%}
<script src="/scripts/index.js"></script>

  <script>
    pannellum.viewer('panorama', {
      "type": "equirectangular",
      "panorama": "{{ imgUrl }}",
      "autoLoad": true,
      "yaw": {{ image.yaw }},
      "pitch": {{ image.pitch}},
      "hfov": {{ image.fov }},
      "keyboardZoom": false,
      "mouseZoom": false
    });
  </script>
{%- endblock -%}